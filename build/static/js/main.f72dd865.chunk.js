(this.webpackJsonpmaterial_chat=this.webpackJsonpmaterial_chat||[]).push([[0],{209:function(e,t,n){},210:function(e,t,n){},347:function(e,t,n){"use strict";n.r(t);var r=n(5),a=n(0),o=n.n(a),i=n(10),c=n.n(i),s=(n(209),n(210),n(194)),u=n(63),d=n.n(u),l=n(94),h=n(95),p=n(96),b=n(97),g="DARK",x="LIGHT",f="BLUE",m="GREEN",j="INDIGO",O="#4782da",v="#407ad6",F="#376fd0",k="#2f65cb",y={name:"DEFAULT",palette:{type:"light",primary:{main:F,contrastText:"#FFF"},secondary:{main:O,contrastText:"#FFF"},background:{default:"#F7F9FC",paper:"#FFF"}},header:{color:l.a[500],background:"#FFF",search:{color:l.a[800]},indicator:{background:v}},footer:{color:l.a[500],background:"#FFF"},sidebar:{color:l.a[200],background:"#233044",header:{color:l.a[200],background:"#233044",brand:{color:O}},footer:{color:l.a[200],background:"#1E2A38",online:{background:h.a[500]},offline:{background:p.a[500]}},badge:{color:"#FFF",background:O}},markdown:{code:{background:"rgba(27, 31, 35, 0.05)",color:"rgb(36, 41, 46)"}}},w=[y,d()(y,{name:g,palette:{type:"dark",primary:{main:v,contrastText:"#FFF"},background:{default:"#1B2635",paper:"#233044"},text:{primary:"rgba(255, 255, 255, 0.95)",secondary:"rgba(255, 255, 255, 0.5)"}},header:{color:l.a[300],background:"#1B2635",search:{color:l.a[200]}},footer:{color:l.a[300],background:"#233044"},markdown:{code:{background:"rgba(240,246,252,0.15)",color:"rgb(201, 209, 217)"}}}),d()(y,{name:x,palette:{type:"light"},header:{color:l.a[200],background:k,search:{color:l.a[100]},indicator:{background:p.a[700]}},sidebar:{color:l.a[900],background:"#FFF",header:{color:"#FFF",background:k,brand:{color:"#FFFFFF"}},footer:{color:l.a[800],background:"#F7F7F7",online:{background:h.a[500]}}}}),d()(y,{name:f,palette:{type:"light"},sidebar:{color:"#FFF",background:F,header:{color:"#FFF",background:k,brand:{color:"#FFFFFF"}},footer:{color:"#FFF",background:k,online:{background:"#FFF"}},badge:{color:"#000",background:"#FFF"}}}),d()(y,{name:m,palette:{primary:{main:h.a[800],contrastText:"#FFF"},secondary:{main:h.a[500],contrastText:"#FFF"}},header:{indicator:{background:h.a[600]}},sidebar:{color:"#FFF",background:h.a[700],header:{color:"#FFF",background:h.a[800],brand:{color:"#FFFFFF"}},footer:{color:"#FFF",background:h.a[800],online:{background:"#FFF"}},badge:{color:"#000",background:"#FFF"}}}),d()(y,{name:j,palette:{primary:{main:b.a[600],contrastText:"#FFF"},secondary:{main:b.a[400],contrastText:"#FFF"}},header:{indicator:{background:b.a[600]}},sidebar:{color:"#FFF",background:b.a[700],header:{color:"#FFF",background:b.a[800],brand:{color:"#FFFFFF"}},footer:{color:"#FFF",background:b.a[800],online:{background:"#FFF"}},badge:{color:"#000",background:"#FFF"}}})],C={fontFamily:["Inter","-apple-system","BlinkMacSystemFont",'"Segoe UI"',"Roboto",'"Helvetica Neue"',"Arial","sans-serif",'"Apple Color Emoji"','"Segoe UI Emoji"','"Segoe UI Symbol"'].join(","),fontSize:13,fontWeightLight:300,fontWeightRegular:400,fontWeightMedium:500,fontWeightBold:600,h1:{fontSize:"2rem",fontWeight:600,lineHeight:1.25},h2:{fontSize:"1.75rem",fontWeight:600,lineHeight:1.25},h3:{fontSize:"1.5rem",fontWeight:600,lineHeight:1.25},h4:{fontSize:"1.125rem",fontWeight:500,lineHeight:1.25},h5:{fontSize:"1.0625rem",fontWeight:500,lineHeight:1.25},h6:{fontSize:"1rem",fontWeight:500,lineHeight:1.25},body1:{fontSize:13},button:{textTransform:"none"}},E={MuiCard:{root:{borderRadius:"6px",boxShadow:"rgba(50, 50, 93, 0.025) 0px 2px 5px -1px, rgba(0, 0, 0, 0.05) 0px 1px 3px -1px"}},MuiCardHeader:{action:{marginTop:"-4px",marginRight:"-4px"}},MuiPickersDay:{day:{fontWeight:"300"}},MuiPickersYear:{root:{height:"64px"}},MuiPickersCalendar:{transitionContainer:{marginTop:"6px"}},MuiPickersCalendarHeader:{iconButton:{backgroundColor:"transparent","& > *":{backgroundColor:"transparent"}},switchHeader:{marginTop:"2px",marginBottom:"4px"}},MuiPickersClock:{container:{margin:"32px 0 4px"}},MuiPickersClockNumber:{clockNumber:{left:"calc(50% - 16px)",width:"32px",height:"32px"}},MuiPickerDTHeader:{dateHeader:{"& h4":{fontSize:"2.125rem",fontWeight:400}},timeHeader:{"& h3":{fontSize:"3rem",fontWeight:400}}},MuiPickersTimePicker:{hourMinuteLabel:{"& h2":{fontSize:"3.75rem",fontWeight:300}}},MuiPickersToolbar:{toolbar:{"& h4":{fontSize:"2.125rem",fontWeight:400}}},MuiChip:{root:{borderRadius:"6px"}}},T={values:{xs:0,sm:600,md:960,lg:1280,xl:1440}},S={MuiButtonBase:{disableRipple:!0},MuiCardHeader:{titleTypographyProps:{variant:"h6"}}};var _,I=["none","box-shadow: 0px 1px 2px 0px rgba(0, 0, 0, 0.05);","box-shadow: 0px 1px 2px 0px rgba(0, 0, 0, 0.05);","box-shadow: 0px 1px 2px 0px rgba(0, 0, 0, 0.05);","box-shadow: 0px 1px 2px 0px rgba(0, 0, 0, 0.05);","box-shadow: 0px 1px 2px 0px rgba(0, 0, 0, 0.05);","box-shadow: 0px 1px 2px 0px rgba(0, 0, 0, 0.05);","box-shadow: 0px 1px 2px 0px rgba(0, 0, 0, 0.05);","box-shadow: 0px 1px 2px 0px rgba(0, 0, 0, 0.05);","box-shadow: 0px 1px 2px 0px rgba(0, 0, 0, 0.05);","box-shadow: 0px 1px 2px 0px rgba(0, 0, 0, 0.05);","box-shadow: 0px 1px 2px 0px rgba(0, 0, 0, 0.05);","box-shadow: 0px 1px 2px 0px rgba(0, 0, 0, 0.05);","box-shadow: 0px 1px 2px 0px rgba(0, 0, 0, 0.05);","box-shadow: 0px 1px 2px 0px rgba(0, 0, 0, 0.05);","box-shadow: 0px 1px 2px 0px rgba(0, 0, 0, 0.05);","box-shadow: 0px 1px 2px 0px rgba(0, 0, 0, 0.05);","box-shadow: 0px 1px 2px 0px rgba(0, 0, 0, 0.05);","box-shadow: 0px 1px 2px 0px rgba(0, 0, 0, 0.05);","box-shadow: 0px 1px 2px 0px rgba(0, 0, 0, 0.05);","box-shadow: 0px 1px 2px 0px rgba(0, 0, 0, 0.05);","box-shadow: 0px 1px 2px 0px rgba(0, 0, 0, 0.05);","box-shadow: 0px 1px 2px 0px rgba(0, 0, 0, 0.05);","box-shadow: 0px 1px 2px 0px rgba(0, 0, 0, 0.05);","box-shadow: 0px 1px 2px 0px rgba(0, 0, 0, 0.05);"],N=function(e){var t=w.find((function(t){return t.name===e}));return t||(console.warn(new Error("The theme ".concat(e," is not valid"))),t=w[0]),Object(s.a)({spacing:4,breakpoints:T,overrides:E,props:S,typography:C,shadows:I,palette:t.palette},{name:t.name,header:t.header,footer:t.footer,sidebar:t.sidebar,markdown:t.markdown})},A=n(34),R=n(12),M=n(181),P=n(392),D=n(398),H=n(393),W=n(394),U=n(399),z=n(389),G=n(396),L=n(401),V=n(193),B=n.n(V),Y=n(184),J=n(41),q=Object(J.a)(Object(J.a)({},{TYPING_START:"typingStart",TYPING_END:"typingEnd",SET_VIEWED:"setViewed",MESSAGE:"message",CREATE_CONVERSATION:"createConversation",GET_CONVERSATIONS:"getConversations",JOIN_THE_CREATED_CONVERSATION:"joinTheCreatedConversation",CONNECTED:"connected"}),{TYPING_STARTED:"typingStarted",NEW_MESSAGE:"newMessage",CHAT_ERROR:"chatError",CREATED_CONVERSATION:"createdConversation",CONNECT:"connect",USER_ACTIVE:"userActive",CHAT_VIEWED:"chatViewed",GET_USERS:"getUsers"}),K=n(185),Q=n.n(K),X=n(52),Z=n.n(X),$=n(33),ee=n(35),te=n(16),ne=n.n(te),re=n(42),ae=n(43),oe=n(48),ie=n(59),ce=n(128),se=n(28),ue=n(89),de=n(93),le=n(195),he=function(e){Object(ue.a)(n,e);var t=Object(de.a)(n);function n(e){var r,a,o;return Object(oe.a)(this,n),(o=t.call(this)).error=e,o.status=null===(r=o.error)||void 0===r?void 0:r.status,o.message=null===(a=o.error)||void 0===a?void 0:a.message,o}return n}(Object(le.a)(Error)),pe="GET",be="POST",ge="PUT",xe="DELETE",fe="PATCH",me=function(){function e(t){var n=t.url,r=t.method,a=t.headers,o=t.body;Object(oe.a)(this,e),this.method=r,this.url=n,this.headers=a||{},this.body=o||{}}return Object(ie.a)(e,[{key:"setHeaders",value:function(e){return this.headers=Object(J.a)(Object(J.a)({},this.headers),e),this}},{key:"query",value:function(e){return this.url+=Object.keys(e).reduce((function(t,n,r,a){var o=Array.isArray(e[n])?e[n].join(","):e[n];return t+="".concat(n,"=").concat(o),r!==a.length-1&&(t+="&"),t}),this.url.includes("?")?"&":"?"),this}},{key:"then",value:function(e,t){return this.promise=this.promise||this.execute(),this.promise.then(e,t)}},{key:"catch",value:function(e){return this.promise=this.promise||this.execute(),this.promise.catch(e)}},{key:"getError",value:function(){var e=Object(re.a)(ne.a.mark((function e(t){return ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(502!==t.status){e.next=2;break}return e.abrupt("return","No connection with server");case 2:return e.abrupt("return",t instanceof Response?t.json():t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"isSucceededStatus",value:function(e){return e.status>=200&&e.status<300}},{key:"checkStatus",value:function(){var e=Object(re.a)(ne.a.mark((function e(t){var n;return ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isSucceededStatus(t)){e.next=2;break}return e.abrupt("return",t);case 2:return e.next=4,this.getError(t);case 4:return n=e.sent,e.abrupt("return",Promise.reject(new he(n)));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"execute",value:function(){var e=Object(re.a)(ne.a.mark((function e(){var t;return ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(this.url),t={method:this.method,headers:this.headers},Object.keys(this.body).length&&(t.body=JSON.stringify(this.body),t.headers["Content-Type"]="application/json"),e.abrupt("return",fetch(this.url,t).then(this.checkStatus.bind(this)).then((function(e){return e.json()})));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}],[{key:"get",value:function(e){return new this({url:e,method:pe})}},{key:"post",value:function(e,t){return new this({url:e,body:t,method:be})}},{key:"put",value:function(e,t){return new this({url:e,body:t,method:ge})}},{key:"delete",value:function(e){return new this({url:e,method:xe})}},{key:"patch",value:function(e,t){return new this({url:e,body:t,method:fe})}}]),e}(),je=new(function(){function e(){Object(oe.a)(this,e)}return Object(ie.a)(e,[{key:"getApiPath",value:function(){return"https://muzsoyuz.com/api/v2"}}]),e}()),Oe=function(e){Object(ue.a)(n,e);var t=Object(de.a)(n);function n(){return Object(oe.a)(this,n),t.apply(this,arguments)}return Object(ie.a)(n,[{key:"setToken",value:function(e){return this.setHeaders({Authorization:"Bearer ".concat(e)}),this}},{key:"props",value:function(e){return this.body.props=e,this}},{key:"isSucceededStatus",value:function(e){return!e.status||Object(ce.a)(Object(se.a)(n.prototype),"isSucceededStatus",this).call(this,e)}},{key:"execute",value:function(){var e=Object(re.a)(ne.a.mark((function e(){return ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.url=je.getApiPath()+this.url,e.abrupt("return",Object(ce.a)(Object(se.a)(n.prototype),"execute",this).call(this).then(this.checkStatus.bind(this)).catch((function(e){throw e.message=Array.isArray(e.message)?e.message.join(", "):e.message,e})));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}],[{key:"getUserProfile",value:function(){return this.get("/user")}},{key:"makeAuthentication",value:function(e,t){return this.post("/auth/".concat(e),t)}},{key:"login",value:function(e,t){return this.makeAuthentication("signIn",{email:e,password:t})}}]),n}(me),ve="Authorization",Fe={profile:null,token:window.localStorage.getItem(ve),status:"idle",error:null},ke=Object(ae.b)("post/login",function(){var e=Object(re.a)(ne.a.mark((function e(t){var n;return ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Oe.login(t.email,t.password);case 2:return n=e.sent,window.localStorage.setItem(ve,n.token),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),ye=Object(ae.b)("get/profile",(function(){return Oe.getUserProfile().setToken(window.localStorage.getItem(ve))})),we=Object(ae.c)({name:"user",initialState:Fe,reducers:{},extraReducers:(_={},Object(ee.a)(_,ke.pending,(function(e){e.status="loading"})),Object(ee.a)(_,ke.fulfilled,(function(e,t){e.token=t.payload.token,e.profile=t.payload.profile,e.status="succeeded",e.error=null})),Object(ee.a)(_,ke.rejected,(function(e,t){e.token=null,e.profile=null,e.status="failed",e.error=t.error&&t.error.message})),Object(ee.a)(_,ye.pending,(function(e){e.profile={status:"loading"}})),Object(ee.a)(_,ye.fulfilled,(function(e,t){e.profile=Object(J.a)({status:"succeeded",error:null},t.payload)})),Object(ee.a)(_,ye.rejected,(function(e,t){var n;e.profile={status:"failed",error:t.error&&t.error.message},"Unauthorized"===(null===t||void 0===t||null===(n=t.error)||void 0===n?void 0:n.message)&&(window.localStorage.clear(),window.location.reload())})),_)}).reducer,Ce=function(e){return e.user},Ee=function(e){var t=Object(a.useState)(null),n=Object(A.a)(t,2),r=n[0],o=n[1],i=Object(a.useState)({}),c=Object(A.a)(i,2),s=c[0],u=c[1],d=Object($.c)(Ce).profile;e=(null===d||void 0===d?void 0:d._id)&&e;var l=Object(a.useRef)();Object(a.useEffect)((function(){return l.current=Object(Y.io)("https://muzsoyuz.com",{query:{token:e},path:"/api/v2/chat"}),l.current.on(q.CONNECT,(function(){l.current.emit(q.CONNECTED,h)})),l.current.on(q.TYPING_STARTED,(function(e){u((function(t){var n=Z()(t);return n[e].typing=!0,n[e].typingStartedAt=Date.now(),n})),setTimeout((function(){u((function(t){var n=t;return Date.now()-n[e].typingStartedAt>1e3&&((n=Z()(t))[e].typing=!1),n}))}),1e3)})),l.current.on(q.CHAT_ERROR,(function(e){return alert(e.message)})),l.current.on(q.CHAT_VIEWED,(function(e){u((function(t){var n=Z()(t),r=n[e];return r.messages.forEach((function(e){e.viewed=!0})),o((function(e){return r._id===(null===e||void 0===e?void 0:e._id)?r:e})),n}))})),l.current.on(q.USER_ACTIVE,(function(e){var t=e._id,n=e.isActive,r=e.lastSeen;console.log({userId:t,isActive:n}),u((function(e){for(var a=Z()(e),o=0,i=Object.values(a);o<i.length;o++){var c=i[o];if(c.user._id===t){c.user.isActive=n,c.user.lastSeen=r;break}}return a}))})),l.current.on(q.NEW_MESSAGE,b),l.current.on(q.CREATED_CONVERSATION,p),function(){return l.current.disconnect()}}),[d]);var h=function(){l.current.emit(q.GET_CONVERSATIONS,(function(e){u(Q()(e,"_id"))}))},p=function(e){l.current.emit(q.JOIN_THE_CREATED_CONVERSATION,e,(function(t){u((function(n){var r=Z()(n);return r[e]=t,r}))}))},b=function(e){u((function(t){var n=Z()(t),r=n[e.chatId];return r.messages.push(e),o((function(t){return r._id===(null===t||void 0===t?void 0:t._id)?(r.user._id===e.senderId&&l.current.emit(q.SET_VIEWED,e.chatId),r):t})),n[e.chatId]=r,n}))};return{currentConversation:r,sendMessage:function(e){l.current.emit(q.MESSAGE,e)},changeConversation:function(e){u((function(t){return o(t[e]),t[e].messages.some((function(e){return e.senderId!==d._id}))&&l.current.emit(q.SET_VIEWED,e),t}))},createConversation:function(e){l.current.emit(q.CREATE_CONVERSATION,e)},fetchConversations:h,fetchUsers:function(e){l.current.emit(q.GET_USERS,e)},getConversations:function(){return Object.values(s)},setTyping:function(e){l.current.emit(q.TYPING_START,e)}}},Te=n(395),Se=n(187),_e=n.n(Se),Ie=n(382),Ne=n(383),Ae=n(384),Re=n(379),Me=n(385),Pe=n(386),De=n(402),He=n(387);function We(e){var t,n=e.conversation,a=e.onClick,o=e.profile,i=e.selected,c=(t=n.user.isActive,Object(R.b)(Re.a).withConfig({displayName:"Conversation__getStatusBadge",componentId:"p727om-0"})(["margin-right:","px;span{background-color:",";border:1.5px solid ",";height:12px;width:12px;border-radius:50%;}"],(function(e){return e.theme.spacing(1)}),(function(e){return e.theme.sidebar.footer[t?"online":"offline"].background}),(function(e){return e.theme.palette.common.white}))),s=_e()(n.messages,(function(e){var t=e.viewed,n=e.senderId;return Number(!t&&n!==o._id)}));return Object(r.jsxs)(Me.a,{selected:i,button:!0,onClick:a,children:[Object(r.jsx)(Pe.a,{children:Object(r.jsx)(c,{overlap:"circle",anchorOrigin:{vertical:"bottom",horizontal:"right"},variant:"dot",children:Object(r.jsx)(De.a,{alt:n.user.email,src:n.user.imageURL})})}),Object(r.jsx)(He.a,{style:{overflow:"hidden"},primary:n.user.email||"Guest",secondary:!n.user.isActive&&"Last seen: ".concat(new Date(n.user.lastSeen).toLocaleTimeString())}),Object(r.jsx)(Re.a,{badgeContent:s,color:"secondary"}),function(){if(n.typing)return Object(r.jsx)(Ie.a,{});if(!s){var e=n.messages.some((function(e){var t=e.senderId;return!e.viewed&&t===o._id}));return n.messages.some((function(e){return e.senderId===o._id}))?e?Object(r.jsx)(Ne.a,{}):Object(r.jsx)(Ae.a,{}):null}return null}()]})}var Ue=n(98),ze=R.b.div.withConfig({displayName:"Message__ChatMessage",componentId:"sc-16l4dw0-0"})(["margin:30px;text-align:",";"],(function(e){return e.position})),Ge=R.b.div.withConfig({displayName:"Message__ChatMessageInner",componentId:"sc-16l4dw0-1"})(["display:inline-block;"]),Le=Object(R.b)(Ue.a).withConfig({displayName:"Message__ChatMessageTime",componentId:"sc-16l4dw0-2"})(["text-align:right;opacity:0.8;"]),Ve=R.b.div.withConfig({displayName:"Message__ChatMessageBubble",componentId:"sc-16l4dw0-3"})(["display:inline-block;margin-right:auto;background:",";color:",";border-radius:3px;padding:","px;margin-bottom:","px;",";"],(function(e){return e.highlighted?e.theme.palette.secondary.main:e.theme.palette.action.hover}),(function(e){return e.highlighted?e.theme.palette.common.white:e.theme.palette.text.primary}),(function(e){return e.theme.spacing(2)}),(function(e){return e.theme.spacing(1)}),(function(e){return e.theme.shadows[1]}));function Be(e){var t=e.message,n=e.viewed,a=e.time,o=e.position,i=void 0===o?"left":o;return Object(r.jsx)(ze,{position:i,children:Object(r.jsxs)(Ge,{children:[Object(r.jsx)(Ve,{highlighted:"right"===i,children:Object(r.jsx)(Ue.a,{variant:"body2",children:t})}),n?Object(r.jsx)(Ae.a,{}):Object(r.jsx)(Ne.a,{}),Object(r.jsx)(Le,{variant:"body2",children:a})]})})}var Ye=n(388),Je=n(391),qe=n(191),Ke=n.n(qe),Qe=n(192),Xe=n.n(Qe),Ze=n(390),$e=Object(Ye.a)((function(e){return{root:{width:"100%",maxWidth:360,backgroundColor:e.palette.background.paper,position:"relative",overflow:"auto",maxHeight:300},nested:{paddingLeft:e.spacing(4)}}}));function et(e){var t=e.fetchUsers,n=e.onClick,i=$e(),c=o.a.useState(!1),s=Object(A.a)(c,2),u=s[0],d=s[1],l=o.a.useState(null),h=Object(A.a)(l,2),p=h[0],b=h[1];Object(a.useEffect)((function(){p||t((function(e){return b(e)}))}),[p,u]);return Object(r.jsxs)(z.a,{component:"nav","aria-labelledby":"nested-list-subheader",className:i.root,children:[Object(r.jsxs)(Me.a,{button:!0,onClick:function(){d(!u)},children:[Object(r.jsx)(Pe.a,{children:Object(r.jsx)(Ze.a,{})}),Object(r.jsx)(He.a,{primary:"Add Conversation"}),u?Object(r.jsx)(Ke.a,{}):Object(r.jsx)(Xe.a,{})]}),Object(r.jsx)(Je.a,{in:u,timeout:"auto",unmountOnExit:!0,children:Object(r.jsx)(z.a,{component:"div",disablePadding:!0,children:(p||[]).map((function(e){return Object(r.jsxs)(Me.a,{button:!0,onClick:n(e._id),className:i.nested,children:[Object(r.jsx)(Pe.a,{children:Object(r.jsx)(De.a,{alt:e.email,src:e.imageURL})}),Object(r.jsx)(He.a,{primary:e.email})]})}))})})]})}var tt=Object(R.b)(P.a).withConfig({displayName:"Chat__Divider",componentId:"bijr22-0"})(L.b),nt=Object(R.b)(D.a).withConfig({displayName:"Chat__TextField",componentId:"bijr22-1"})(L.b),rt=Object(R.b)(H.a).withConfig({displayName:"Chat__ChatContainer",componentId:"bijr22-2"})(["width:100%;height:100vh;"]),at=Object(R.b)(H.a).withConfig({displayName:"Chat__ChatSidebar",componentId:"bijr22-3"})(["border-right:1px solid ",";"],(function(e){return e.theme.palette.divider})),ot=Object(R.b)(H.a).withConfig({displayName:"Chat__ChatMain",componentId:"bijr22-4"})([""]),it=R.b.div.withConfig({displayName:"Chat__ChatMessages",componentId:"bijr22-5"})(["overflow-y:scroll;height:calc(100vh - 94px);"]),ct=Object(R.b)(H.a).withConfig({displayName:"Chat__ChatInput",componentId:"bijr22-6"})(["min-height:94px;padding:","px;"],(function(e){return e.theme.spacing(5)})),st=function(){window.localStorage.clear(),window.location.reload()};function ut(){var e=Object($.b)(),t=Object($.c)(Ce),n=t.status,o=t.profile,i=t.token,c=t.error,s=Ee(i),u=s.currentConversation,d=s.sendMessage,l=s.createConversation,h=s.changeConversation,p=s.getConversations,b=s.setTyping,g=s.fetchUsers,x=Object(a.useState)(""),f=Object(A.a)(x,2),m=f[0],j=f[1],O=Object(a.useState)(null),v=Object(A.a)(O,2),F=v[0],k=v[1],y=p();Object(a.useEffect)((function(){"idle"!==n||i||e(ke({email:prompt("Email"),password:prompt("Password")})),i&&!(null===o||void 0===o?void 0:o.status)&&e(ye())}),[i,o,u]);var w=function(){return m?(null===u||void 0===u?void 0:u._id)?(d({text:m,chatId:u._id}),void j("")):alert("No one conversation set"):alert("Empty input")};if("idle"!==n&&(!o||!i||c))return Object(r.jsxs)("h1",{children:["Error: ",c||"Unknown Error"]});if("succeeded"!==(null===o||void 0===o?void 0:o.status))return Object(r.jsx)("h1",{children:"Wait a minute"});return Object(r.jsxs)(rt,{container:!0,component:W.a,children:[Object(r.jsxs)(at,{item:!0,xs:12,md:4,lg:3,children:[Object(r.jsx)("p",{style:{marginLeft:10},children:"Hello ".concat(null===o||void 0===o?void 0:o.email)}),Object(r.jsx)(H.a,{item:!0,xs:12,children:Object(r.jsx)(U.a,{p:2,children:Object(r.jsx)(et,{onClick:function(e){return function(){l(e)}},fetchUsers:g})})}),Object(r.jsx)(tt,{}),Object(r.jsx)(z.a,{children:y.map((function(e,t){return Object(r.jsx)(We,{conversation:e,selected:F===e._id,profile:o,onClick:function(){h(e._id),k(e._id)}},"conversation-".concat(t))}))}),Object(r.jsx)(U.a,{p:2,children:Object(r.jsx)(Te.a,{style:{cursor:"pointer",color:"red"},onClick:st,children:"Logout"})})]}),Object(r.jsxs)(ot,{item:!0,xs:12,md:8,lg:9,children:[Object(r.jsx)(it,{children:((null===u||void 0===u?void 0:u.messages)||[]).map((function(e,t){var n=e.senderId,a=e.text,i=e.viewed,c=e.createdAt;return Object(r.jsx)(Be,{name:n===o._id?"I":n,message:a,viewed:i,time:new Date(c).toLocaleTimeString(),position:n===o._id?"right":"left"},"message-".concat(t))}))}),Object(r.jsx)(tt,{}),Object(r.jsxs)(ct,{container:!0,children:[Object(r.jsx)(H.a,{item:!0,style:{flexGrow:1},children:Object(r.jsx)(nt,{autoFocus:!0,onChange:function(e){u&&b(u._id),j(e.target.value)},onKeyUp:function(e){"Enter"===e.key&&w()},value:m,variant:"outlined",label:"Type your message",fullWidth:!0})}),Object(r.jsx)(H.a,{item:!0,children:Object(r.jsx)(U.a,{ml:2,children:Object(r.jsx)(G.a,{color:"primary","aria-label":"add",size:"medium",children:Object(r.jsx)(B.a,{onClick:w})})})})]})]})]})}var dt=function(){return Object(r.jsxs)(o.a.Fragment,{children:[Object(r.jsx)(M.a,{title:"Chat"}),Object(r.jsx)(ut,{})]})},lt=n(397),ht=n(400);var pt=function(){var e=Object($.c)((function(e){return e.theme})),t=N(e.currentTheme);return Object(r.jsx)(o.a.Fragment,{children:Object(r.jsx)(ht.b,{injectFirst:!0,children:Object(r.jsx)(lt.a,{theme:t,children:Object(r.jsx)(R.a,{theme:t,children:Object(r.jsx)(dt,{})})})})})},bt=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,403)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,o=t.getLCP,i=t.getTTFB;n(e),r(e),a(e),o(e),i(e)}))},gt=Object(ae.c)({name:"theme",initialState:{currentTheme:"DEFAULT"},reducers:{setTheme:function(e,t){e.currentTheme=t.payload}},extraReducers:{}}),xt=(gt.actions.setTheme,gt.reducer),ft=Object(ae.a)({reducer:{theme:xt,user:we},devTools:!1,preloadedState:{}});c.a.render(Object(r.jsx)(o.a.StrictMode,{children:Object(r.jsx)($.a,{store:ft,children:Object(r.jsx)(pt,{})})}),document.getElementById("root")),bt()}},[[347,1,2]]]);
//# sourceMappingURL=main.f72dd865.chunk.js.map